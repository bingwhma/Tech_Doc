# http1.0 http1.1 http2
## http1.0
http1.0支持的是短连接，相当于客户端每次发起的请求都需要进行tcp三次握手，特别消耗资源  

## http1.1
http1.1支持了长连接，客户端发起http请求的时候，通过tcp三次握手建立连接之后，后续的每次请求都不需要再次进行三次握手，  
除非过了设置的超时时间，虽然不需要再次进行三次握手，但是客户端的每次请求都只能按顺序接收处理，而不能同时将多个请求一次性发送服务器端并且同时响应返回给客户端接收。  
虽然有一个管道化的理论去解决这个问题，但是依旧只是处于理论的阶段，没有实际应用。
## http2
http2基于http1.1的基础之上，支持将多个请求封装为一个请求，同时请求服务器，响应返回给客户端，  
http2在不改变原有传输的基础上，在传输层和应用层之间加入了一层逻辑层，这个逻辑层应用的是spd的原理，能够将请求实现封装一起传输。  
http1.1和http2的不同效果就是客户端的加载时间load time，http2加载时间大大的缩短  

## HTTP2
HTTP/2 是基于 SPDY 协议的，可以打开一个TCP连接并且重复使用，响应多路复用，
而且也支持压缩头部减少头部的体积，添加请求优先级，服务端推送。
在HTTP/2中为了支持这些特性，增加了大量的头部字段来支持。
HTTP/2并没有更改HTTP的语法，而是通过客户端和服务端传输的数据格式，通过新的二进制帧层控制整个过程

## 主要区别
HTTP/2新的二进制格式而非文本格式
HTTP/2是完全多路复用，只需要一个TCP连接就可以实现并行，而非有序并阻塞的
使用header压缩，HTTP/2降低了请求成本
服务端推送，服务端可以主动把响应主动push到客户端
	
## HTTP/2新特性总结
### 头部压缩
每个HTTP传输都包括了请求的一系列资源和描述以及属性的标题。在HTTP/2之前是使用纯文本的形式发送，每次的开销要增加500-800字节，如果使用了HTTP Cookie会增加上千字节，在HTTP/2中，使用了HPACK压缩Header以及响应数据

### 二进制帧层
HTTP/2性能提升的核心在于二进制的帧层，它是指HTTP的消息怎么在客户端以及服务端如何进行封装及传输。
它是接口传输过程中的一种更加轻便、更改的编码机制，新的API提供给我们了应用。HTTP1.x采用的是换行分隔符的形式，HTTP/2是采用的分割消息以及frame，然后每个消息以及frame进行编码。
客户端和服务端进行统一规则，统一的编码解码，从而一直的处理这些消息的发送及接收，要注意的的是HTTP1.x和HTTP/2是不同通信的

### 请求和响应多路复用

连接共享，在HTTP1.x，用户想要多个请求并行必须使用多个TCP连接，而且在一个时间点只能有一个请求发送出去，使得队头阻塞、低效，只能一个过程完成才能发送下一个。
在HTTP/2中，新的帧层接触了对头阻塞限制使得所有请求和响应多路复用，允许客户端和服务端把消息分解成独立的帧，交错传输，然后在另个一个端组装。
过程中，每一个请求都做连接机制，一个请求对应一个id，这样一个TCP连接上可以有多个请求，这些请求可以混杂在一起，接收方根据id进行分类归属到不同的服务端的请求中。

### 服务端推送
HTTP/2的另一个强大的新功能是服务器为单个客户端请求发送多个响应的能力。也就是说，除了对原始请求的响应之外，服务器还可以向客户端推送额外的资源，而不需要客户端明确请求每一个资源！

    推送的资源可以在不同的页面上使用
    推送的资源可以复用，和其他资源一起使用
    推送的资源根据用户的意愿，可以拒绝
    推送的资源可以在客户端缓存
    推送的资源服务端优先
    减少重复请求，极大提升响应速度

https://github.com/zqjflash/http2-protocol
